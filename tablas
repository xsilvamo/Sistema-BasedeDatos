--- TABLAS

CREATE TABLE tipo_estructura(
	id_tipo_estructura SERIAL PRIMARY KEY,
	tipo_estruc VARCHAR(100)
);

CREATE TABLE divisa (
    	id_divisa SERIAL PRIMARY KEY,
    	nom_divisa VARCHAR(100),
	valor INT
);

CREATE TABLE estructura_territorial (
    	id_estructura INT PRIMARY KEY,
    	nom_estructura varchar(100),
	impuesto INT,
	id_tipo_estructura INT,
	id_divisa INT,
	id_estructura_sup INT,
	FOREIGN KEY (id_tipo_estructura) REFERENCES tipo_estructura(id_tipo_estructura),
	FOREIGN KEY (id_divisa) REFERENCES divisa(id_divisa),
	FOREIGN KEY (id_estructura_sup) REFERENCES estructura_territorial(id_estructura)
);

CREATE TABLE causa_baja(
	id_baja SERIAL PRIMARY KEY,
	causa_baja VARCHAR(100)
); 

CREATE TABLE tipo_cedula(
	id_tipo_cedula SERIAL PRIMARY KEY,
	nom_tipo_cedula VARCHAR(100)
);

CREATE TABLE tipo_cliente(
	id_tipo_cliente SERIAL PRIMARY KEY,
	nom_tipo_cliente VARCHAR(100)
);

CREATE TABLE estado_cliente(
	id_estado_cli SERIAL PRIMARY KEY,
	estado_cli VARCHAR(100)
);

CREATE TABLE cliente(
	dni INT,
	id_cliente INT PRIMARY KEY,
	nombres VARCHAR(100),
	apellido_pat VARCHAR(100),
	apellido_mat VARCHAR(100),
	telefono VARCHAR(100),
	fecha_alta_cli DATE,
	fecha_baja_cli DATE,
	id_baja INT,
	id_tipo_cedula INT,
	id_tipo_cliente INT,
	id_estado_cli INT,
	FOREIGN KEY (id_baja) REFERENCES causa_baja(id_baja),
	FOREIGN KEY (id_tipo_cedula) REFERENCES tipo_cedula(id_tipo_cedula),
	FOREIGN KEY (id_tipo_cliente) REFERENCES tipo_cliente(id_tipo_cliente),
	FOREIGN KEY (id_estado_cli) REFERENCES estado_cliente(id_estado_cli)
);

CREATE TABLE estado_cuenta(
	id_estado_cuenta SERIAL PRIMARY KEY,
	estado_cuenta VARCHAR(100)
);

CREATE TABLE cuenta(
	id_cuenta INT PRIMARY KEY,
	direccion_cuenta VARCHAR(100),
	correo_elect VARCHAR(100),
	fecha_alta_cuenta DATE,
	fecha_baja_cuenta DATE,
	id_baja INT,
	id_estado_cuenta INT,
	id_cliente INT,
	FOREIGN KEY (id_baja) REFERENCES causa_baja(id_baja),
	FOREIGN KEY (id_estado_cuenta) REFERENCES estado_cuenta(id_estado_cuenta),
	FOREIGN KEY (id_cliente) REFERENCES cliente(id_cliente)
);

CREATE TABLE tipo_accion(
	id_tipo_accion SERIAL PRIMARY KEY,
	nom_tipo_accion VARCHAR(100)
);


CREATE TABLE estado_accion(
	id_estado_accion SERIAL PRIMARY KEY,
	nom_estado_accion VARCHAR(100)
);

CREATE TABLE vendedor(
	dni_vendedor VARCHAR(100),
	id_vendedor INT PRIMARY KEY,
	nom_vendedor VARCHAR(100),
	apellido_pat_ven VARCHAR(100),
	apellido_mat_ven VARCHAR(100),
	comisiones INT
);

CREATE TABLE accion(
	id_accion INT PRIMARY KEY,
	fecha_inscripcion_a DATE,
	fecha_ejecucion_ini DATE,
	fecha_ejecucion_fin DATE,
	comentarios VARCHAR(1000),
	id_tipo_accion INT,
	id_estado_accion INT,
	id_vendedor INT,
	FOREIGN KEY (id_tipo_accion) REFERENCES tipo_accion(id_tipo_accion),
	FOREIGN KEY (id_estado_accion) REFERENCES estado_accion(id_estado_accion),
	FOREIGN KEY (id_vendedor) REFERENCES vendedor(id_vendedor)
);

CREATE TABLE sucursal(
	id_sucursal INT PRIMARY KEY,
	direc_sucursal VARCHAR(100),
	nom_sucursal VARCHAR(100),
	telefono_sucursal INT,
	correo_sucursal VARCHAR(100),
	id_estructura INT,
	FOREIGN KEY (id_estructura) REFERENCES estructura_territorial(id_estructura)
);

CREATE TABLE vigencia_vendedor(
	id_sucursal INT,
	id_vendedor INT,
	fecha_vigencia DATE,
	PRIMARY KEY (id_sucursal, id_vendedor),
	FOREIGN KEY (id_sucursal) REFERENCES sucursal(id_sucursal),
	FOREIGN KEY (id_vendedor) REFERENCES vendedor(id_vendedor)
);

CREATE TABLE precio (
    	id_precio int,
    	monto INT,
    	id_estructura INT,
    	fecha_inicio_precio DATE,
    	fecha_fin_precio DATE,
    	PRIMARY KEY (id_precio, fecha_inicio_precio),
    	FOREIGN KEY (id_estructura) REFERENCES estructura_territorial(id_estructura)
);

CREATE TABLE tipo_articulo (
    	id_tipo_articulo SERIAL PRIMARY KEY,
    	nom_tipo_articulo varchar(40)
);

CREATE TABLE articulo (
    	id_articulo INT PRIMARY KEY,
    	id_tipo_articulo INT,
	id_articulo_pack INT,
    	id_precio INT,
	fecha_inicio_precio DATE,
    	descripcion_art VARCHAR(100),
    	uso_simcard BOOLEAN,
	id_sucursal INT,
	FOREIGN KEY (id_sucursal) REFERENCES sucursal(id_sucursal),
    	FOREIGN KEY (id_tipo_articulo) REFERENCES tipo_articulo(id_tipo_articulo),
	FOREIGN KEY (id_precio, fecha_inicio_precio) REFERENCES precio(id_precio, fecha_inicio_precio)
);

CREATE TABLE tipo_plan(
	id_tipo_plan INT PRIMARY KEY,
	nombre_plan VARCHAR(100),
	desc_plan VARCHAR(100)
);

CREATE TABLE articulo_pack(
	id_articulo INT,
	id_articulo_pack INT,
	PRIMARY KEY (id_articulo, id_articulo_pack),
	FOREIGN KEY (id_articulo) REFERENCES articulo(id_articulo),
	FOREIGN KEY (id_articulo_pack) REFERENCES articulo(id_articulo_pack)
);

CREATE TABLE tipo_domicilio(
	id_tipo_dom SERIAL PRIMARY KEY,
	nom_tipo_dom VARCHAR(100)
);


CREATE TABLE estado_domicilio(
	id_estado_dom SERIAL,
	estado_dom VARCHAR(100),
	fecha_desde DATE,
	fecha_hasta DATE,
	PRIMARY KEY (id_estado_dom, fecha_desde)
);

CREATE TABLE formato_fact(
	id_formato_fact INT PRIMARY KEY,
	nom_formato_fact VARCHAR(100)
);

